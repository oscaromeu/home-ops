---
# The source secret that will be pushed to the destination secret by PushSecret.
apiVersion: v1
kind: Secret
metadata:
  name: pokedex-credentials
stringData:
  best-pokemon-src: "Charmander"
---
apiVersion: external-secrets.io/v1alpha1
kind: PushSecret
metadata:
  name: &name pokedex-credentials
spec:
  updatePolicy: Replace
  deletionPolicy: Delete
  refreshInterval: 5m
  secretStoreRefs:
    - name: onepassword-connect
      kind: ClusterSecretStore
  selector:
    secret:
      name: pokedex-credentials
  template:
    metadata:
      annotations: { }
      labels: { }
    data:
      best-pokemon: "{{ index . \"best-pokemon-src\" | toString }}"
  data:
     - match:
         secretKey: &key best-pokemon
         remoteRef:
           remoteKey: *name
           property: *key
